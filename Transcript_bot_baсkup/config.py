import os
import sys
import platform
from pathlib import Path
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
SYSTEM_NAME = platform.system().lower()
IS_WINDOWS = SYSTEM_NAME == 'windows'
IS_LINUX = SYSTEM_NAME == 'linux'
IS_MACOS = SYSTEM_NAME == 'darwin'

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è main.py)
BASE_DIR = Path(os.path.dirname(os.path.abspath(sys.argv[0]))).resolve()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–°
if IS_WINDOWS:
    # Windows-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—É—Ç–∏
    FFMPEG_PATH = BASE_DIR / 'ffmpeg' / 'bin'
    FFMPEG_EXECUTABLE = FFMPEG_PATH / 'ffmpeg.exe'
    FFPROBE_EXECUTABLE = FFMPEG_PATH / 'ffprobe.exe'
    WKHTMLTOPDF_PATH = r'C:\Program Files\wkhtmltopdf\bin\wkhtmltopdf.exe'
    PANDOC_PATH = r'C:\Users\{}\AppData\Local\Pandoc\pandoc.exe'.format(os.getenv('USERNAME'))
elif IS_LINUX:
    # Linux-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—É—Ç–∏
    FFMPEG_PATH = Path('/usr/bin')
    FFMPEG_EXECUTABLE = FFMPEG_PATH / 'ffmpeg'
    FFPROBE_EXECUTABLE = FFMPEG_PATH / 'ffprobe'
    WKHTMLTOPDF_PATH = '/usr/bin/wkhtmltopdf'
    PANDOC_PATH = '/usr/bin/pandoc'
else:
    # MacOS –∏–ª–∏ –¥—Ä—É–≥–∏–µ –û–°
    FFMPEG_PATH = Path('/usr/local/bin')
    FFMPEG_EXECUTABLE = FFMPEG_PATH / 'ffmpeg'
    FFPROBE_EXECUTABLE = FFMPEG_PATH / 'ffprobe'
    WKHTMLTOPDF_PATH = '/usr/bin/wkhtmltopdf'
    PANDOC_PATH = '/usr/local/bin/pandoc'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è PDF
PDF_MARGIN = '1.5cm'
PDF_FONT = 'Arial'
PDF_PAGE_SIZE = 'A4'
PDF_DPI = '300'

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
TEMP_DIRECTORY = BASE_DIR / "temp"
PROCESSED_DIRECTORY = BASE_DIR / "processed"
LOG_DIRECTORY = BASE_DIR / "logs"
PDF_TEMPLATE_DIR = BASE_DIR / "templates"
PDF_OUTPUT_DIR = PROCESSED_DIRECTORY / "pdf"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
for directory in [TEMP_DIRECTORY, PROCESSED_DIRECTORY, LOG_DIRECTORY, 
                 PDF_TEMPLATE_DIR, PDF_OUTPUT_DIR]:
    directory.mkdir(parents=True, exist_ok=True)

# –¢–æ–∫–µ–Ω—ã –∏–∑ .env —Ñ–∞–π–ª–∞
TRANSCRIPT_BOT_TOKEN = os.getenv('TRANSCRIPT_BOT_TOKEN')    # –ë–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –∫–æ–º–∞–Ω–¥ –∏ –∞—É–¥–∏–æ
OBSIMATIC_BOT_TOKEN = os.getenv('OBSIMATIC_BOT_TOKEN')     # –ë–æ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–º–µ—Ç–æ–∫
GROUP_CHAT_ID = os.getenv('GROUP_CHAT_ID')                 # ID –≥—Ä—É–ø–ø—ã –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏
OBSIMATIC_BOT_USERNAME = os.getenv('OBSIMATIC_BOT_USERNAME')  # Username ObsiMatic –±–æ—Ç–∞ (–±–µ–∑ @)
OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')              # API –∫–ª—é—á OpenAI

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
DEBUG_MODE = True    # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ OBSIMATIC_BOT
SEND_TO_GROUP = True  # –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
SEND_TO_OBSIMATIC_BOT = False  # –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ ObsiMatic –±–æ—Ç

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Whisper
WHISPER_LOCAL_MODEL = "base"         # –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å whisper
WHISPER_CLOUD_MODEL = "whisper-1"    # –û–±–ª–∞—á–Ω–∞—è –º–æ–¥–µ–ª—å whisper —á–µ—Ä–µ–∑ OpenAI API
USE_LOCAL_WHISPER = False           # True –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏, False –¥–ª—è –æ–±–ª–∞—á–Ω–æ–π

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ OpenAI –º–æ–¥–µ–ª–µ–π
CHAT_MODEL = "gpt-4o-mini"               # –ú–æ–¥–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–º–µ—Ç–æ–∫
CHAT_TEMPERATURE = 0.7             # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
ANALYSIS_TEMPERATURE = 0.3         # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
GENERATE_PDF = True                # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–∏ PDF –≤–µ—Ä—Å–∏—é –∑–∞–º–µ—Ç–æ–∫
MARKDOWN_ENABLED = True            # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram API
TELEGRAM_SIZE_LIMIT_MB = 20        # –ë–∞–∑–æ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram Bot API
TELEGRAM_PREMIUM_SIZE_LIMIT_MB = 4096  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è Telegram Premium (4GB)
REGULAR_SIZE_LIMIT_MB = 20         # –õ–∏–º–∏—Ç –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
PREMIUM_SIZE_LIMIT_MB = 2048       # –õ–∏–º–∏—Ç –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (2GB)

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ª–∏–º–∏—Ç—ã (–±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Premium —Å—Ç–∞—Ç—É—Å–∞)
MAX_VIDEO_SIZE_MB = REGULAR_SIZE_LIMIT_MB
MAX_AUDIO_SIZE_MB = REGULAR_SIZE_LIMIT_MB

# –õ–∏–º–∏—Ç—ã –≤ –±–∞–π—Ç–∞—Ö –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
DEFAULT_SIZE_LIMIT = REGULAR_SIZE_LIMIT_MB * 1024 * 1024       # –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
PREMIUM_SIZE_LIMIT = PREMIUM_SIZE_LIMIT_MB * 1024 * 1024       # –î–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
VIDEO_FORMATS = ['.mp4', '.avi', '.mov', '.webm', '.mkv', '.wmv', '.flv']
AUDIO_FORMATS = ['.mp3', '.wav', '.m4a', '.ogg', '.aac', '.wma', '.flac']
SUPPORTED_FORMATS = VIDEO_FORMATS + AUDIO_FORMATS

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_FILE = LOG_DIRECTORY / 'bot.log'
LOG_FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
LOG_LEVEL = 'INFO'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
MAX_CHUNK_SIZE = 25 * 1024 * 1024  # 25MB –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–ª—è —Å–∂–∞—Ç–∏—è
RECOMMENDED_AUDIO_FORMATS = {
    'mp3': '128k',  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –±–∏—Ç—Ä–µ–π—Ç –¥–ª—è MP3
    'ogg': '96k',   # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –±–∏—Ç—Ä–µ–π—Ç –¥–ª—è OGG
    'm4a': '128k',  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –±–∏—Ç—Ä–µ–π—Ç –¥–ª—è M4A
}

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
TEMP_DIRECTORY = str(TEMP_DIRECTORY.absolute())
PROCESSED_DIRECTORY = str(PROCESSED_DIRECTORY.absolute())
LOG_DIRECTORY = str(LOG_DIRECTORY.absolute())
LOG_FILE = str(LOG_FILE.absolute())
PDF_TEMPLATE_DIR = str(PDF_TEMPLATE_DIR.absolute())
PDF_OUTPUT_DIR = str(PDF_OUTPUT_DIR.absolute())
FFMPEG_PATH = str(FFMPEG_PATH.absolute())
FFMPEG_EXECUTABLE = str(FFMPEG_EXECUTABLE.absolute())
FFPROBE_EXECUTABLE = str(FFPROBE_EXECUTABLE.absolute())

# –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞
START_MESSAGE = """
üëã –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∏ –≤–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏–π.

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:
üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
üé• –í–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
üîó –°—Å—ã–ª–∫—É –Ω–∞ YouTube –≤–∏–¥–µ–æ

–ò —è —Å–æ–∑–¥–∞–º –¥–ª—è –≤–∞—Å —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É!
"""

HELP_MESSAGE = """
ü§ñ –Ø –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–µ–π:

üìù –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- YouTube –≤–∏–¥–µ–æ

üìä –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: –¥–æ 20MB
- Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: –¥–æ 2GB

‚ùì –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å? –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.
"""

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
CONTENT_ANALYSIS_PROMPT = """Analyze the following transcript and determine if it's a Zoom meeting/phone call or a lesson/course. Respond with either 'meeting' or 'course'."""

# Generation Parameters
NOTES_TEMPERATURE = 0.7
NOTES_MAX_TOKENS = 16384
NOTES_PRESENCE_PENALTY = 0.3
NOTES_FREQUENCY_PENALTY = 0.3

# System Prompts
MEETING_PROMPT = """Analyze the meeting transcript and create a structured summary with the following:
                 1. Title (inferred from content)
                 2. List of participants
                 3. Main topics discussed
                 4. Key decisions and action items
                 5. Summary of the meeting
                 Format the output in Markdown. Language: russian."""

COURSE_CONTENT_PROMPT = '''–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∏ —Å–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:
1. –†–∞–∑–¥–µ–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —É–∫–∞–∂–∏:
   - –ù–æ–º–µ—Ä –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞
   - –í—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ MM:SS-MM:SS
   - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
3. –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: 0:00-1:30, 1:30-2:45 –∏ —Ç.–¥.
4. –°–¥–µ–ª–∞–π –æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –∏ –ø–æ–ª–µ–∑–Ω—ã–º–∏
'''

COURSE_PROMPT_HEADER = """# {title}

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ê–≤—Ç–æ—Ä:** {channel}
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** {duration}
- **–î–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:** {process_date}
- **–°—Å—ã–ª–∫–∞:** {video_url}

**–û–ø–∏—Å–∞–Ω–∏–µ:**
{original_description}

---
"""

COURSE_CONTENT_FORMAT = '''### {section_number}. {section_title}
**{start_time}-{end_time}**
{description}
'''

COURSE_PROMPT = """–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤. 
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π, —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏.

–†–∞–∑–¥–µ–ª "–ö–æ–Ω—Å–ø–µ–∫—Ç" - —ç—Ç–æ –û–°–ù–û–í–ù–û–ô —Ä–∞–∑–¥–µ–ª. –í–æ—Ç –∫–∞–∫ –µ–≥–æ –Ω—É–∂–Ω–æ –æ—Ñ–æ—Ä–º–ª—è—Ç—å:

1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —É—Ä–æ–≤–Ω—è (###) –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ–º
   - –ö–∞–∂–¥–∞—è —Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è –ø–æ–¥—Ç–µ–º (-)
   - –ò—Å–ø–æ–ª—å–∑—É–π –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π (  *)
   - –í—ã–¥–µ–ª—è–π –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –∂–∏—Ä–Ω—ã–º (**—Ç–µ—Ä–º–∏–Ω**)

2. –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π —Ç–µ–º—ã:
   ### –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã
   - –û—Å–Ω–æ–≤–Ω–∞—è –º—ã—Å–ª—å –∏–ª–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è
     * –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
     * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
     * –ü—Ä–∏–º–µ—Ä—ã –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
   - –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–µ–º–∞–º–∏
     * –ö–∞–∫ —ç—Ç–∞ —Ç–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π
     * –ö–∞–∫ –æ–Ω–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π

3. –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
   - –ù–∞—á–∏–Ω–∞–π —Å –æ–±—â–µ–≥–æ –æ–±–∑–æ—Ä–∞ —Ç–µ–º—ã
   - –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º
   - –ó–∞–≤–µ—Ä—à–∞–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
   - –î–æ–±–∞–≤–ª—è–π —Å–≤—è–∑–∫–∏ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏

4. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
   - –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–æ–±—â–∏–π –æ–±–∑–æ—Ä)
   - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
   - –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
   - –ö—Ä–∞—Ç–∫–∏–µ –≤—ã–≤–æ–¥—ã –ø–æ –∫–∞–∂–¥–æ–π —Ç–µ–º–µ

5. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:
   - –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ—Ä–æ—Ç–∫–∏–µ, —á–µ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
   - –†–∞–∑–¥–µ–ª—è–π –¥–ª–∏–Ω–Ω—ã–µ –∞–±–∑–∞—Ü—ã –Ω–∞ –ø—É–Ω–∫—Ç—ã
   - –î–æ–±–∞–≤–ª—è–π –ø—Ä–æ–±–µ–ª—ã –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
   - –°–æ—Ö—Ä–∞–Ω—è–π –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤:
1. –°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ä–∞–∑–¥–µ–ª–æ–≤
2. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ markdown
3. –°–æ—Ö—Ä–∞–Ω—è–π –æ—Ç—Å—Ç—É–ø—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ø–∏—Å–∫–æ–≤
4. –ù–µ –¥–æ–±–∞–≤–ª—è–π –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
5. –î–µ–ª–∞–π –∫–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º
6. –ò—Å–ø–æ–ª—å–∑—É–π –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∏ –Ω—É–º–µ—Ä–∞—Ü–∏—é –∫–∞–∫ –≤ —à–∞–±–ª–æ–Ω–µ
7. –í—ã–¥–µ–ª—è–π –≤–∞–∂–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –∂–∏—Ä–Ω—ã–º (**—Ç–µ—Ä–º–∏–Ω**)

–ù–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ —Å–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç. 
–°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∏ —Å–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:
1. –†–∞–∑–¥–µ–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —É–∫–∞–∂–∏:
   - –ù–æ–º–µ—Ä –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞
   - –í—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ MM:SS-MM:SS
   - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
3. –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: 0:00-1:30, 1:30-2:45 –∏ —Ç.–¥.
4. –°–¥–µ–ª–∞–π –æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –∏ –ø–æ–ª–µ–∑–Ω—ã–º–∏

## –ö–æ–Ω—Å–ø–µ–∫—Ç
–°–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏:
1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã –∏ –ø–æ–¥—Ç–µ–º—ã
2. –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏ –∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
3. –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏ –Ω—é–∞–Ω—Å—ã
4. –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏

–ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —É—Ä–æ–≤–Ω—è (###) –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏
–í—ã–¥–µ–ª–∏ 3-5 –∫–ª—é—á–µ–≤—ã—Ö –∏–¥–µ–π. –î–ª—è –∫–∞–∂–¥–æ–π:

1. **–ò–¥–µ—è**: [—á–µ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞]
   - **–ó–Ω–∞—á–∏–º–æ—Å—Ç—å**: [–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏]
   - **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: [—Å–≤—è–∑—å —Å –æ–±—â–µ–π —Ç–µ–º–æ–π]

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
–°–ø–∏—Å–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π:

1. **[–¢–µ—Ä–º–∏–Ω]**
   - **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: [—á–µ—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ]
   - **–í–∞–∂–Ω–æ—Å—Ç—å**: [–ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ]
   - **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: [–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è]

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:

1. **–ü—Ä–∏–º–µ—Ä**: [–Ω–∞–∑–≤–∞–Ω–∏–µ/–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]
   - **–°–∏—Ç—É–∞—Ü–∏—è**: [–æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞]
   - **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: [–∫–∞–∫ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é]
   - **–í—ã–≤–æ–¥—ã**: [—á—Ç–æ –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ—á—å]

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ:

1. **–ò—Ç–æ–≥–∏**: [–æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã]
2. **–í—ã–≤–æ–¥—ã**: [–≥–ª–∞–≤–Ω—ã–µ –∑–∞–∫–ª—é—á–µ–Ω–∏—è]
3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: [–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã]
4. **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**: [—á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ]

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤:

1. **–£–ø–æ–º—è–Ω—É—Ç—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**:
   - [—Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞]

2. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã**:
   - [–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã]

3. **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã**:
   - [—Ç–µ–º—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è]

–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:
{transcript}"""

# Templates for Obsidian notes
MEETING_TEMPLATE = """# {title}

## Metadata
- Date: {date}
- Time: {time}
- Type: {meeting_type}

## File Information
- Filename: {filename}
- Duration: {duration}
- Audio Channels: {channels}
{additional_info}

## Participants
{participants}

## Summary
{summary}

## Action Items
{action_items}

## Debug Information
### Detailed Transcript
{transcript}
"""

COURSE_TEMPLATE = """# {title}

## Metadata
- Type: {content_type}
- Date: {date}

## Course Information
- Filename: {filename}
- Duration: {duration}
- Audio Channels: {channels}
{additional_info}

## Video Information
- Video URL: {video_url}
- Original Description:
{original_description}

## Summary
{summary}

## Table of Contents
{contents}

## Sections
{sections}

## Debug Information
### Detailed Transcript
{transcript}
"""
